function toggleTheme(){return"stylesheet"==light_theme.getAttribute("rel")?(dark_theme.setAttribute("rel","stylesheet"),light_theme.setAttribute("rel","stylesheet alternate"),localStorage.setItem("theme","dark"),landingSentence&&(landingSentence.innerHTML="If you're reading this in a bright room, try the <a id='landing_theme-link' onclick='landingToggleTheme();'>light theme</a>.")):(dark_theme.setAttribute("rel","stylesheet"),light_theme.setAttribute("rel","stylesheet"),dark_theme.setAttribute("rel","stylesheet alternate"),localStorage.setItem("theme","light"),landingSentence&&(landingSentence.innerHTML="If you're reading this in a dark room, try the <a id='landing_theme-link' onclick='landingToggleTheme();'>dark theme</a>.")),!1}function landingToggleTheme(){"stylesheet"==light_theme.getAttribute("rel")?(slider.checked=!0,landingSentence.innerHTML="If you're reading this in a bright room, try the <a id='landing_theme-link' onclick='landingToggleTheme();'>light theme</a>."):(slider.checked=!1,landingSentence.innerHTML="If you're reading this in a dark room, try the <a id='landing_theme-link' onclick='landingToggleTheme();'>dark theme</a>."),toggleTheme()}!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):e.SmoothScroll=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(C){"use strict";function S(){var n={};return Array.prototype.forEach.call(arguments,function(e){for(var t in e){if(!e.hasOwnProperty(t))return;n[t]=e[t]}}),n}function s(e){"#"===e.charAt(0)&&(e=e.substr(1));for(var t,n=String(e),o=n.length,i=-1,a="",s=n.charCodeAt(0);++i<o;){if(0===(t=n.charCodeAt(i)))throw new InvalidCharacterError("Invalid character: the input contains U+0000.");1<=t&&t<=31||127==t||0===i&&48<=t&&t<=57||1===i&&48<=t&&t<=57&&45===s?a+="\\"+t.toString(16)+" ":a+=128<=t||45===t||95===t||48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122?n.charAt(i):"\\"+n.charAt(i)}return"#"+a}function k(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}function E(e){return e?parseInt(C.getComputedStyle(e).height,10)+e.offsetTop:0}function w(e,t,n,o){t.emitEvents&&"function"==typeof C.CustomEvent&&(o=new CustomEvent(e,{bubbles:!0,detail:{anchor:n,toggle:o}}),document.dispatchEvent(o))}var $={ignore:"[data-scroll-ignore]",header:null,topOnEmptyHash:!0,speed:500,speedAsDuration:!1,durationMax:null,durationMin:null,clip:!0,offset:0,easing:"easeInOutCubic",customEasing:null,updateURL:!0,popstate:!0,emitEvents:!0};return function(o,e){var v,i,n,y,b={cancelScroll:function(e){cancelAnimationFrame(y),y=null,e||w("scrollCancel",v)}};b.animateScroll=function(o,i,e){b.cancelScroll();var a,s,r,l,c,u,d,h,f,m,g=S(v||$,e||{}),p="[object Number]"===Object.prototype.toString.call(o),t=p||!o.tagName?null:o;(p||t)&&(a=C.pageYOffset,g.header&&!n&&(n=document.querySelector(g.header)),e=E(n),s=p?o:function(e,t,n,o){var i=0;if(e.offsetParent)for(;i+=e.offsetTop,e=e.offsetParent;);return i=Math.max(i-t-n,0),i=o?Math.min(i,k()-C.innerHeight):i}(t,e,parseInt("function"==typeof g.offset?g.offset(o,i):g.offset,10),g.clip),r=s-a,l=k(),c=0,u=function(e,t){e=t.speedAsDuration?t.speed:Math.abs(e/1e3*t.speed);return t.durationMax&&e>t.durationMax?t.durationMax:t.durationMin&&e<t.durationMin?t.durationMin:parseInt(e,10)}(r,g),f=function(e,t){var n=C.pageYOffset;if(e==t||n==t||(a<t&&C.innerHeight+n)>=l)return b.cancelScroll(!0),e=t,n=p,0===(t=o)&&document.body.focus(),n||(t.focus(),document.activeElement!==t&&(t.setAttribute("tabindex","-1"),t.focus(),t.style.outline="none"),C.scrollTo(0,e)),w("scrollStop",g,o,i),!(y=d=null)},m=function(e){var t,n,o;c+=e-(d=d||e),h=a+r*(n=h=1<(h=0===u?0:c/u)?1:h,"easeInQuad"===(t=g).easing&&(o=n*n),"easeOutQuad"===t.easing&&(o=n*(2-n)),"easeInOutQuad"===t.easing&&(o=n<.5?2*n*n:(4-2*n)*n-1),"easeInCubic"===t.easing&&(o=n*n*n),"easeOutCubic"===t.easing&&(o=--n*n*n+1),"easeInOutCubic"===t.easing&&(o=n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1),"easeInQuart"===t.easing&&(o=n*n*n*n),"easeOutQuart"===t.easing&&(o=1- --n*n*n*n),"easeInOutQuart"===t.easing&&(o=n<.5?8*n*n*n*n:1-8*--n*n*n*n),"easeInQuint"===t.easing&&(o=n*n*n*n*n),"easeOutQuint"===t.easing&&(o=1+--n*n*n*n*n),"easeInOutQuint"===t.easing&&(o=n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n),(o=t.customEasing?t.customEasing(n):o)||n),C.scrollTo(0,Math.floor(h)),f(h,s)||(y=C.requestAnimationFrame(m),d=e)},0===C.pageYOffset&&C.scrollTo(0,0),t=o,e=g,p||history.pushState&&e.updateURL&&history.pushState({smoothScroll:JSON.stringify(e),anchor:t.id},document.title,t===document.documentElement?"#top":"#"+t.id),"matchMedia"in C&&C.matchMedia("(prefers-reduced-motion)").matches?C.scrollTo(0,Math.floor(s)):(w("scrollStart",g,o,i),b.cancelScroll(!0),C.requestAnimationFrame(m)))};function t(e){if(!e.defaultPrevented&&!(0!==e.button||e.metaKey||e.ctrlKey||e.shiftKey)&&"closest"in e.target&&(i=e.target.closest(o))&&"a"===i.tagName.toLowerCase()&&!e.target.closest(v.ignore)&&i.hostname===C.location.hostname&&i.pathname===C.location.pathname&&/#/.test(i.href)){var t,n;try{n=s(decodeURIComponent(i.hash))}catch(e){n=s(i.hash)}if("#"===n){if(!v.topOnEmptyHash)return;t=document.documentElement}else t=document.querySelector(n);(t=t||"#top"!==n?t:document.documentElement)&&(e.preventDefault(),n=v,history.replaceState&&n.updateURL&&!history.state&&(e=(e=C.location.hash)||"",history.replaceState({smoothScroll:JSON.stringify(n),anchor:e||C.pageYOffset},document.title,e||C.location.href)),b.animateScroll(t,i))}}function a(e){var t;null!==history.state&&history.state.smoothScroll&&history.state.smoothScroll===JSON.stringify(v)&&("string"==typeof(t=history.state.anchor)&&t&&!(t=document.querySelector(s(history.state.anchor)))||b.animateScroll(t,null,{updateURL:!1}))}b.destroy=function(){v&&(document.removeEventListener("click",t,!1),C.removeEventListener("popstate",a,!1),b.cancelScroll(),y=n=i=v=null)};return function(){if(!("querySelector"in document&&"addEventListener"in C&&"requestAnimationFrame"in C&&"closest"in C.Element.prototype))throw"Smooth Scroll: This browser does not support the required JavaScript methods and browser APIs.";b.destroy(),v=S($,e||{}),n=v.header?document.querySelector(v.header):null,document.addEventListener("click",t,!1),v.updateURL&&v.popstate&&C.addEventListener("popstate",a,!1)}(),b}}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t(e)}):"object"==typeof exports?module.exports=t(e):e.Gumshoe=t(e)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(u){"use strict";function d(e,t,n){n.settings.events&&(n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n}),t.dispatchEvent(n))}function n(e){var t=0;if(e.offsetParent)for(;e;)t+=e.offsetTop,e=e.offsetParent;return 0<=t?t:0}function h(e){e&&e.sort(function(e,t){return n(e.content)<n(t.content)?-1:1})}function s(e,t,n){return e=e.getBoundingClientRect(),t="function"==typeof(t=t).offset?parseFloat(t.offset()):parseFloat(t.offset),n?parseInt(e.bottom,10)<(u.innerHeight||document.documentElement.clientHeight):parseInt(e.top,10)<=t}function r(){return u.innerHeight+u.pageYOffset>=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)}function f(e,t){var n,o,i=e[e.length-1];if(n=i,o=t,!(!r()||!s(n.content,o,!0)))return i;for(var a=e.length-1;0<=a;a--)if(s(e[a].content,t))return e[a]}function m(e,t){var n;!e||(n=e.nav.closest("li"))&&(n.classList.remove(t.navClass),e.content.classList.remove(t.contentClass),o(n,t),d("gumshoeDeactivate",n,{link:e.nav,content:e.content,settings:t}))}var g={navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:0,reflow:!1,events:!0},o=function(e,t){!t.nested||(e=e.parentNode.closest("li"))&&(e.classList.remove(t.nestedClass),o(e,t))},p=function(e,t){!t.nested||(e=e.parentNode.closest("li"))&&(e.classList.add(t.nestedClass),p(e,t))};return function(e,t){var n,i,a,o,s,r={setup:function(){n=document.querySelectorAll(e),i=[],Array.prototype.forEach.call(n,function(e){var t=document.getElementById(decodeURIComponent(e.hash.substr(1)));t&&i.push({nav:e,content:t})}),h(i)}};r.detect=function(){var e,t,n,o=f(i,s);o?a&&o.content===a.content||(m(a,s),t=s,!(e=o)||(n=e.nav.closest("li"))&&(n.classList.add(t.navClass),e.content.classList.add(t.contentClass),p(n,t),d("gumshoeActivate",n,{link:e.nav,content:e.content,settings:t})),a=o):a&&(m(a,s),a=null)};function l(e){o&&u.cancelAnimationFrame(o),o=u.requestAnimationFrame(r.detect)}function c(e){o&&u.cancelAnimationFrame(o),o=u.requestAnimationFrame(function(){h(i),r.detect()})}r.destroy=function(){a&&m(a,s),u.removeEventListener("scroll",l,!1),s.reflow&&u.removeEventListener("resize",c,!1),s=o=a=n=i=null};return s=function(){var n={};return Array.prototype.forEach.call(arguments,function(e){for(var t in e){if(!e.hasOwnProperty(t))return;n[t]=e[t]}}),n}(g,t||{}),r.setup(),r.detect(),u.addEventListener("scroll",l,!1),s.reflow&&u.addEventListener("resize",c,!1),r}}),$(function(){$(window).resize(function(){updateNav()}),$btn.on("click",function(e){$hlinks.toggleClass("hidden"),$(this).toggleClass("close"),e.stopPropagation()})}),$(document).ready(function(){$("#main").fitVids();function e(){(0===$(".author__urls-wrapper button").length?1024<$(window).width():!$(".author__urls-wrapper button").is(":visible"))?($(".sidebar").addClass("sticky"),$(".author__urls").removeClass("is--visible"),$(".author__urls-wrapper button").removeClass("open")):$(".sidebar").removeClass("sticky")}e(),$(window).resize(function(){e()}),$(".author__urls-wrapper button").on("click",function(e){e.stopPropagation(),$(".author__urls").toggleClass("is--visible"),$(".author__urls-wrapper button").toggleClass("open")}),$(document).keyup(function(e){27===e.keyCode&&$(".initial-content").hasClass("is--hidden")&&($(".search-content").toggleClass("is--visible"),$(".initial-content").toggleClass("is--hidden"))}),$(".search__toggle").on("click",function(){$(".search-content").toggleClass("is--visible"),$(".initial-content").toggleClass("is--hidden"),setTimeout(function(){$(".search-content input").focus()},400)});new SmoothScroll('a[href*="#"]',{offset:20,speed:400,speedAsDuration:!0,durationMax:500});0<$("nav.toc").length&&new Gumshoe("nav.toc a",{navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:20,reflow:!0,events:!0}),$("a[href$='.jpg'],a[href$='.jpeg'],a[href$='.JPG'],a[href$='.png'],a[href$='.gif'],a[href$='.webp']").addClass("image-popup"),$(".image-popup").magnificPopup({type:"image",tLoading:"Loading image #%curr%...",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">Image #%curr%</a> could not be loaded.'},removalDelay:500,mainClass:"mfp-zoom-in",callbacks:{beforeOpen:function(){this.st.image.markup=this.st.image.markup.replace("mfp-figure","mfp-figure mfp-with-anim")}},closeOnContentClick:!0,midClick:!0}),$(".page__content").find("h1, h2, h3, h4, h5, h6").each(function(){var e,t=$(this).attr("id");t&&((e=document.createElement("a")).className="header-link",e.href="#"+t,e.innerHTML='<span class="sr-only">Permalink</span><i class="fas fa-link"></i>',e.title="Permalink",$(this).append(e))}),document.body.addEventListener("click",function(e){e.stopPropagation();var t=$("nav.greedy-nav .greedy-nav__toggle"),n=$("nav.greedy-nav .hidden-links");document.getElementById("greedy-nav-button").classList.contains("close")&&(t.removeClass("close"),n.addClass("hidden"));e=$(".btn--inverse"),t=$(".author__urls"),n=document.getElementById("profile-button");n&&n.classList.contains("open")&&(e.removeClass("open"),e.attr("style","border-color: none;"),t.removeClass("is--visible"))})});var WriteTerminalText=function(e,t,n){this.toWrite=t,this.element=e,this.loopCount=0,this.period=parseInt(n,10)||2e3,this.text="",this.tick(),this.isDeleting=!1};WriteTerminalText.prototype.tick=function(){var e=this.toWrite[this.loopCount%this.toWrite.length];this.isDeleting?this.text=e.substring(0,this.text.length-1):this.text=e.substring(0,this.text.length+1),this.element.innerHTML='<span class="wrap">'+this.text+"</span>";var t=this,n=200-100*Math.random();this.isDeleting&&(n/=2),this.isDeleting||this.text!==e?this.isDeleting&&""===this.text&&(this.isDeleting=!1,this.loopCount++,n=500):(n=this.period,this.isDeleting=!0),setTimeout(function(){t.tick()},n)},window.onload=function(){for(var e=document.getElementsByClassName("terminal-text"),t=0;t<e.length;t++){var n=e[t].getAttribute("data-words"),o=e[t].getAttribute("data-period");n&&new WriteTerminalText(e[t],JSON.parse(n),o)}};